{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kiran/Desktop/suitent/frontend/hooks/useDeepBookTrader.ts"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\n\nimport { SuiGrpcClient } from '@mysten/sui/grpc';\nimport { deepbook, type DeepBookClient, type BalanceManager } from '@mysten/deepbook-v3';\nimport type { ClientWithExtensions } from '@mysten/sui/client';\nimport { decodeSuiPrivateKey } from '@mysten/sui/cryptography';\nimport { Ed25519Keypair } from '@mysten/sui/keypairs/ed25519';\nimport { Transaction } from '@mysten/sui/transactions';\nimport { useSignAndExecuteTransaction, useCurrentAccount } from '@mysten/dapp-kit';\nimport { useTurnkey } from '@turnkey/react-wallet-kit';\n\nconst BALANCE_MANAGER_KEY = 'MANAGER_1';\n\nclass DeepBookTrader {\n  client: ClientWithExtensions<{ deepbook: DeepBookClient }>;\n  address: string;\n  env: 'testnet' | 'mainnet';\n  walletType: 'standard' | 'turnkey' | null;\n\n  constructor(address: string, env: 'testnet' | 'mainnet', walletType: 'standard' | 'turnkey' | null) {\n    this.address = address;\n    this.env = env;\n    this.walletType = walletType;\n    this.client = this.#createClient(env);\n  }\n\n  #createClient(env: 'testnet' | 'mainnet', balanceManagers?: { [key: string]: BalanceManager }) {\n    return new SuiGrpcClient({\n      network: env,\n      baseUrl:\n        env === 'mainnet'\n          ? 'https://fullnode.mainnet.sui.io:443'\n          : 'https://fullnode.testnet.sui.io:443',\n    }).$extend(\n      deepbook({\n        address: this.address,\n        balanceManagers,\n      }),\n    );\n  }\n\n  getActiveAddress() {\n    return this.address;\n  }\n\n  // Try alternative approach using the client's transaction creation\n  createBalanceManagerTransactionAlt() {\n    console.log('[DeepBookTrader] Trying alternative transaction approach');\n    \n    try {\n      // Create transaction using the same pattern as the docs but with direct call\n      const tx = new Transaction();\n      \n      // Try calling the SDK method directly without storing the function\n      this.client.deepbook.balanceManager.createAndShareBalanceManager()(tx);\n      \n      console.log('[DeepBookTrader] Alternative approach succeeded');\n      return tx;\n    } catch (error) {\n      console.error('[DeepBookTrader] Alternative approach failed:', error);\n      throw error;\n    }\n  }\n\n  // Create a Balance Manager and reinitialize client\n  createBalanceManagerTransaction() {\n    console.log('[DeepBookTrader] Starting transaction creation');\n    console.log('[DeepBookTrader] Client details:', {\n      hasDeepbook: !!this.client.deepbook,\n      hasBalanceManager: !!this.client.deepbook?.balanceManager,\n      address: this.address\n    });\n    \n    try {\n      // Use the Transaction from the same source as DeepBook SDK\n      const tx = new Transaction();\n      console.log('[DeepBookTrader] Transaction created:', tx);\n      console.log('[DeepBookTrader] Transaction constructor name:', tx.constructor.name);\n      \n      // Get the builder function\n      const builderFn = this.client.deepbook.balanceManager.createAndShareBalanceManager();\n      console.log('[DeepBookTrader] Got builder function:', typeof builderFn);\n      \n      // The error happens here - let's see what the SDK expects\n      console.log('[DeepBookTrader] About to call builder function with tx:', tx);\n      \n      // Try to call the builder function\n      builderFn(tx);\n      \n      console.log('[DeepBookTrader] Builder function completed successfully');\n      console.log('[DeepBookTrader] Final transaction:', tx);\n      \n      return tx;\n    } catch (error) {\n      console.error('[DeepBookTrader] Error building transaction:', error);\n      console.error('[DeepBookTrader] Error details:', {\n        message: error.message,\n        stack: error.stack,\n        name: error.name\n      });\n      throw error;\n    }\n  }\n\n  // Extract balance manager address using exact documented pattern\n  extractBalanceManagerFromDetails(result: any) {\n    console.log('[DeepBookTrader] Extracting using documented pattern...');\n    console.log('[DeepBookTrader] Full result structure:', JSON.stringify(result, null, 2));\n    \n    // Check if transaction failed first (from docs)\n    if (result.$kind === 'FailedTransaction') {\n      console.error('[DeepBookTrader] Transaction failed:', result.FailedTransaction);\n      throw new Error('Transaction failed');\n    }\n    \n    // Use exact pattern from DeepBook docs\n    const objectTypes = result.Transaction?.objectTypes ?? {};\n    const changedObjects = result.Transaction?.effects?.changedObjects ?? [];\n    \n    console.log('[DeepBookTrader] ObjectTypes:', objectTypes);\n    console.log('[DeepBookTrader] ChangedObjects:', changedObjects);\n    \n    const balanceManagerAddress = changedObjects.find(\n      (obj: any) => {\n        const isCreated = obj.idOperation === 'Created';\n        const isBalanceManager = objectTypes[obj.objectId]?.includes('BalanceManager');\n        \n        console.log('[DeepBookTrader] Checking object:', {\n          objectId: obj.objectId,\n          idOperation: obj.idOperation, \n          objectType: objectTypes[obj.objectId],\n          isCreated,\n          isBalanceManager\n        });\n        \n        return isCreated && isBalanceManager;\n      }\n    )?.objectId;\n\n    console.log('[DeepBookTrader] Extracted balance manager address:', balanceManagerAddress);\n    return balanceManagerAddress;\n  }\n\n  // Reinitialize client with balance manager\n  reinitializeWithBalanceManager(balanceManagerAddress: string) {\n    const balanceManagers: { [key: string]: BalanceManager } = {\n      [BALANCE_MANAGER_KEY]: {\n        address: balanceManagerAddress,\n        tradeCap: undefined,\n      },\n    };\n\n    this.client = this.#createClient(this.env, balanceManagers);\n  }\n\n  // Create deposit transaction (for DEEP since it's the base token)\n  createDepositTransaction(amount: number, tokenType: 'DEEP' | 'SUI' = 'SUI') {\n    const tx = new Transaction();\n    const builderFn = this.client.deepbook.balanceManager.depositIntoManager(BALANCE_MANAGER_KEY, tokenType, amount);\n    builderFn(tx);\n    return tx;\n  }\n\n  // Create market buy order transaction (Buy DEEP with SUI)\n  createMarketBuyOrderTransaction(quantitySui: number, clientOrderId: string = Date.now().toString()) {\n    const tx = new Transaction();\n    \n    const builderFn = this.client.deepbook.placeMarketOrder({\n      poolKey: 'DEEP_SUI',  // DEEP is base, SUI is quote\n      balanceManagerKey: BALANCE_MANAGER_KEY,\n      clientOrderId,\n      quantity: quantitySui,  // Amount of SUI to spend (quote)\n      isBid: true,  // Buy DEEP (base) with SUI (quote)\n      payWithDeep: false,  // Pay fees with SUI\n    });\n    builderFn(tx);\n\n    return tx;\n  }\n\n  // Create market sell order transaction (Sell DEEP for SUI)  \n  createMarketSellOrderTransaction(quantityDeep: number, clientOrderId: string = Date.now().toString()) {\n    const tx = new Transaction();\n    \n    const builderFn = this.client.deepbook.placeMarketOrder({\n      poolKey: 'DEEP_SUI',  // DEEP is base, SUI is quote\n      balanceManagerKey: BALANCE_MANAGER_KEY,\n      clientOrderId,\n      quantity: quantityDeep,  // Amount of DEEP to sell (base)\n      isBid: false,  // Sell DEEP (base) for SUI (quote)\n      payWithDeep: false,  // Pay fees with SUI\n    });\n    builderFn(tx);\n\n    return tx;\n  }\n\n  // Create limit buy order transaction (Buy DEEP with SUI at specific price)\n  createLimitBuyOrderTransaction(quantityDeep: number, pricePerDeep: number, clientOrderId: string = Date.now().toString()) {\n    const tx = new Transaction();\n    \n    const builderFn = this.client.deepbook.placeLimitOrder({\n      poolKey: 'DEEP_SUI',\n      balanceManagerKey: BALANCE_MANAGER_KEY,\n      clientOrderId,\n      quantity: quantityDeep,  // Amount of DEEP to buy\n      price: pricePerDeep,     // Price in SUI per DEEP\n      isBid: true,  // Buy order\n      timeInForce: 'GTC',  // Good Till Canceled\n      selfMatchingOption: 'CANCEL_OLDEST',\n      payWithDeep: false,\n    });\n    builderFn(tx);\n\n    return tx;\n  }\n\n  // Create limit sell order transaction (Sell DEEP for SUI at specific price)\n  createLimitSellOrderTransaction(quantityDeep: number, pricePerDeep: number, clientOrderId: string = Date.now().toString()) {\n    const tx = new Transaction();\n    \n    const builderFn = this.client.deepbook.placeLimitOrder({\n      poolKey: 'DEEP_SUI',\n      balanceManagerKey: BALANCE_MANAGER_KEY,\n      clientOrderId,\n      quantity: quantityDeep,  // Amount of DEEP to sell  \n      price: pricePerDeep,     // Price in SUI per DEEP\n      isBid: false,  // Sell order\n      timeInForce: 'GTC',\n      selfMatchingOption: 'CANCEL_OLDEST', \n      payWithDeep: false,\n    });\n    builderFn(tx);\n\n    return tx;\n  }\n\n  // Check manager balance for a token\n  async checkManagerBalance(coinType: string) {\n    try {\n      return await this.client.deepbook.checkManagerBalance(BALANCE_MANAGER_KEY, coinType);\n    } catch (error) {\n      console.error(`[DeepBookTrader] Error checking ${coinType} balance:`, error);\n      return '0';\n    }\n  }\n}\n\nexport function useDeepBookTrader(walletAddress?: string, walletType?: 'standard' | 'turnkey' | null) {\n  const [trader, setTrader] = useState<DeepBookTrader | null>(null);\n  const [isInitialized, setIsInitialized] = useState(false);\n  const [balanceManagerAddress, setBalanceManagerAddress] = useState<string | null>(null);\n\n  const { mutate: signAndExecute } = useSignAndExecuteTransaction();\n  const currentAccount = useCurrentAccount();\n  const { wallets: turnkeyWallets } = useTurnkey();\n\n  // Initialize trader when wallet connects\n  const initializeTrader = useCallback(() => {\n    if (walletAddress && walletType) {\n      const newTrader = new DeepBookTrader(walletAddress, 'testnet', walletType);\n      setTrader(newTrader);\n    }\n  }, [walletAddress, walletType]);\n\n  // Initialize trader on mount or wallet change\n  useEffect(() => {\n    initializeTrader();\n  }, [initializeTrader]);\n\n  const createBalanceManager = useCallback(async () => {\n    if (!trader) throw new Error('Trader not initialized');\n\n    return new Promise(async (resolve, reject) => {\n      try {\n        // Try the alternative approach first\n        let tx;\n        try {\n          tx = trader.createBalanceManagerTransactionAlt();\n          console.log('[useDeepBookTrader] Alternative transaction creation succeeded');\n        } catch (altError) {\n          console.log('[useDeepBookTrader] Alternative failed, trying original:', altError.message);\n          tx = trader.createBalanceManagerTransaction();\n        }\n        \n        console.log('[useDeepBookTrader] Raw transaction:', tx);\n        console.log('[useDeepBookTrader] Transaction methods available:', Object.getOwnPropertyNames(tx));\n\n        if (walletType === 'standard') {\n          // The dapp-kit hook doesn't provide detailed object information\n          // So we'll use the digest to query the transaction details\n          signAndExecute(\n            { \n              transaction: tx\n            },\n            {\n              onSuccess: async (result) => {\n                console.log('[useDeepBookTrader] Transaction succeeded with digest:', result.digest);\n                \n                try {\n                  // Since dapp-kit doesn't provide object details, wait for transaction to be indexed\n                  console.log('[useDeepBookTrader] Waiting for transaction to be indexed...');\n                  \n                  const txDetails = await trader.client.core.waitForTransaction({\n                    digest: result.digest,\n                    timeout: 30_000, // 30 second timeout\n                    include: {\n                      effects: true,\n                      objectTypes: true,\n                      transaction: true,\n                    }\n                  });\n                  \n                  console.log('[useDeepBookTrader] Transaction details:', txDetails);\n                  \n                  // Extract balance manager from the detailed transaction\n                  const address = trader.extractBalanceManagerFromDetails(txDetails);\n                  \n                  if (address) {\n                    console.log('[useDeepBookTrader] Successfully extracted address:', address);\n                    setBalanceManagerAddress(address);\n                    trader.reinitializeWithBalanceManager(address);\n                    setIsInitialized(true);\n                    resolve(result);\n                  } else {\n                    console.error('[useDeepBookTrader] No balance manager address found in transaction details');\n                    reject(new Error('Failed to extract balance manager address from transaction details'));\n                  }\n                } catch (queryError) {\n                  console.error('[useDeepBookTrader] Error querying transaction details:', queryError);\n                  reject(queryError);\n                }\n              },\n              onError: async (error) => {\n                console.error('[useDeepBookTrader] dapp-kit hook failed:', error);\n                \n                // Fallback to core client approach as per docs\n                try {\n                  console.log('[useDeepBookTrader] Trying core client approach...');\n                  \n                  if (!currentAccount?.address) {\n                    reject(new Error('No wallet address available'));\n                    return;\n                  }\n\n                  // This uses the documented pattern from DeepBook docs\n                  const result = await trader.client.core.signAndExecuteTransaction({\n                    transaction: tx,\n                    // Note: We don't have direct access to the private key here\n                    // This would need wallet adapter integration\n                    include: { effects: true, objectTypes: true },\n                  });\n\n                  if (result.$kind === 'FailedTransaction') {\n                    throw new Error('Transaction failed');\n                  }\n\n                  const address = trader.extractBalanceManagerAddress(result.Transaction);\n                  \n                  if (address) {\n                    setBalanceManagerAddress(address);\n                    trader.reinitializeWithBalanceManager(address);\n                    setIsInitialized(true);\n                    resolve(result);\n                  } else {\n                    reject(new Error('Failed to extract balance manager address'));\n                  }\n                } catch (coreError) {\n                  console.error('[useDeepBookTrader] Core client also failed:', coreError);\n                  reject(coreError);\n                }\n              }\n            }\n          );\n        } else {\n          // TODO: Implement Turnkey signing\n          reject(new Error('Turnkey signing not implemented yet'));\n        }\n      } catch (error) {\n        console.error('[useDeepBookTrader] Error creating transaction:', error);\n        reject(error);\n      }\n    });\n  }, [trader, walletType, signAndExecute, currentAccount]);\n\n  const depositUsdt = useCallback(async (amount: number) => {\n    if (!trader || !isInitialized) throw new Error('Trader not initialized or balance manager not created');\n\n    return new Promise((resolve, reject) => {\n      try {\n        const tx = trader.createDepositTransaction(amount);\n\n        if (walletType === 'standard') {\n          signAndExecute(\n            { \n              transaction: tx,\n              options: {\n                showEffects: true,\n                showObjectChanges: true,\n              }\n            },\n            {\n              onSuccess: (result) => {\n                console.log('[useDeepBookTrader] USDT deposited:', result);\n                resolve(result);\n              },\n              onError: (error) => {\n                console.error('[useDeepBookTrader] Failed to deposit USDT:', error);\n                reject(error);\n              }\n            }\n          );\n        } else {\n          // TODO: Implement Turnkey signing\n          reject(new Error('Turnkey signing not implemented yet'));\n        }\n      } catch (error) {\n        console.error('[useDeepBookTrader] Error creating deposit transaction:', error);\n        reject(error);\n      }\n    });\n  }, [trader, isInitialized, walletType, signAndExecute]);\n\n  const buySuiWithUsdtMarket = useCallback(async (quantityUsdt: number) => {\n    if (!trader || !isInitialized) throw new Error('Trader not initialized or balance manager not created');\n\n    return new Promise((resolve, reject) => {\n      const clientOrderId = Date.now().toString(); // Simple order ID\n      const tx = trader.createBuyOrderTransaction(quantityUsdt, clientOrderId);\n\n      if (walletType === 'standard') {\n        signAndExecute(\n          { transaction: tx },\n          {\n            onSuccess: (result) => {\n              console.log('[useDeepBookTrader] Buy order executed:', result);\n              resolve(result);\n            },\n            onError: (error) => {\n              console.error('[useDeepBookTrader] Failed to execute buy order:', error);\n              reject(error);\n            }\n          }\n        );\n      } else {\n        // TODO: Implement Turnkey signing\n        reject(new Error('Turnkey signing not implemented yet'));\n      }\n    });\n  }, [trader, isInitialized, walletType, signAndExecute]);\n\n  const sellSuiForUsdtMarket = useCallback(async (quantitySui: number) => {\n    if (!trader || !isInitialized) throw new Error('Trader not initialized or balance manager not created');\n\n    return new Promise((resolve, reject) => {\n      const clientOrderId = Date.now().toString(); // Simple order ID\n      const tx = trader.createSellOrderTransaction(quantitySui, clientOrderId);\n\n      if (walletType === 'standard') {\n        signAndExecute(\n          { transaction: tx },\n          {\n            onSuccess: (result) => {\n              console.log('[useDeepBookTrader] Sell order executed:', result);\n              resolve(result);\n            },\n            onError: (error) => {\n              console.error('[useDeepBookTrader] Failed to execute sell order:', error);\n              reject(error);\n            }\n          }\n        );\n      } else {\n        // TODO: Implement Turnkey signing\n        reject(new Error('Turnkey signing not implemented yet'));\n      }\n    });\n  }, [trader, isInitialized, walletType, signAndExecute]);\n\n  const checkManagerBalance = useCallback(async (coinType: string) => {\n    if (!trader || !isInitialized) return '0';\n    return trader.checkManagerBalance(coinType);\n  }, [trader, isInitialized]);\n\n  return {\n    trader,\n    isInitialized,\n    balanceManagerAddress,\n    createBalanceManager,\n    depositUsdt,\n    buySuiWithUsdtMarket,\n    sellSuiForUsdtMarket,\n    checkManagerBalance\n  };\n}"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AAAA;AAIA;AACA;AACA;AAAA;;AAXA;;;;;;;AAaA,MAAM,sBAAsB;AAE5B,MAAM;IACJ,OAA2D;IAC3D,QAAgB;IAChB,IAA2B;IAC3B,WAA0C;IAE1C,YAAY,OAAe,EAAE,GAA0B,EAAE,UAAyC,CAAE;QAClG,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,GAAG,GAAG;QACX,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAA,YAAa,CAAC;IACnC;IAEA,CAAA,YAAa,CAAC,GAA0B,EAAE,eAAmD;QAC3F,OAAO,IAAI,8KAAa,CAAC;YACvB,SAAS;YACT,SACE,QAAQ,YACJ,wCACA;QACR,GAAG,OAAO,CACR,IAAA,4KAAQ,EAAC;YACP,SAAS,IAAI,CAAC,OAAO;YACrB;QACF;IAEJ;IAEA,mBAAmB;QACjB,OAAO,IAAI,CAAC,OAAO;IACrB;IAEA,mEAAmE;IACnE,qCAAqC;QACnC,QAAQ,GAAG,CAAC;QAEZ,IAAI;YACF,6EAA6E;YAC7E,MAAM,KAAK,IAAI,yLAAW;YAE1B,mEAAmE;YACnE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,4BAA4B,GAAG;YAEnE,QAAQ,GAAG,CAAC;YACZ,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iDAAiD;YAC/D,MAAM;QACR;IACF;IAEA,mDAAmD;IACnD,kCAAkC;QAChC,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,oCAAoC;YAC9C,aAAa,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ;YACnC,mBAAmB,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;YAC3C,SAAS,IAAI,CAAC,OAAO;QACvB;QAEA,IAAI;YACF,2DAA2D;YAC3D,MAAM,KAAK,IAAI,yLAAW;YAC1B,QAAQ,GAAG,CAAC,yCAAyC;YACrD,QAAQ,GAAG,CAAC,kDAAkD,GAAG,WAAW,CAAC,IAAI;YAEjF,2BAA2B;YAC3B,MAAM,YAAY,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,4BAA4B;YAClF,QAAQ,GAAG,CAAC,0CAA0C,OAAO;YAE7D,0DAA0D;YAC1D,QAAQ,GAAG,CAAC,4DAA4D;YAExE,mCAAmC;YACnC,UAAU;YAEV,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,uCAAuC;YAEnD,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gDAAgD;YAC9D,QAAQ,KAAK,CAAC,mCAAmC;gBAC/C,SAAS,MAAM,OAAO;gBACtB,OAAO,MAAM,KAAK;gBAClB,MAAM,MAAM,IAAI;YAClB;YACA,MAAM;QACR;IACF;IAEA,iEAAiE;IACjE,iCAAiC,MAAW,EAAE;QAC5C,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,2CAA2C,KAAK,SAAS,CAAC,QAAQ,MAAM;QAEpF,gDAAgD;QAChD,IAAI,OAAO,KAAK,KAAK,qBAAqB;YACxC,QAAQ,KAAK,CAAC,wCAAwC,OAAO,iBAAiB;YAC9E,MAAM,IAAI,MAAM;QAClB;QAEA,uCAAuC;QACvC,MAAM,cAAc,OAAO,WAAW,EAAE,eAAe,CAAC;QACxD,MAAM,iBAAiB,OAAO,WAAW,EAAE,SAAS,kBAAkB,EAAE;QAExE,QAAQ,GAAG,CAAC,iCAAiC;QAC7C,QAAQ,GAAG,CAAC,oCAAoC;QAEhD,MAAM,wBAAwB,eAAe,IAAI,CAC/C,CAAC;YACC,MAAM,YAAY,IAAI,WAAW,KAAK;YACtC,MAAM,mBAAmB,WAAW,CAAC,IAAI,QAAQ,CAAC,EAAE,SAAS;YAE7D,QAAQ,GAAG,CAAC,qCAAqC;gBAC/C,UAAU,IAAI,QAAQ;gBACtB,aAAa,IAAI,WAAW;gBAC5B,YAAY,WAAW,CAAC,IAAI,QAAQ,CAAC;gBACrC;gBACA;YACF;YAEA,OAAO,aAAa;QACtB,IACC;QAEH,QAAQ,GAAG,CAAC,uDAAuD;QACnE,OAAO;IACT;IAEA,2CAA2C;IAC3C,+BAA+B,qBAA6B,EAAE;QAC5D,MAAM,kBAAqD;YACzD,CAAC,oBAAoB,EAAE;gBACrB,SAAS;gBACT,UAAU;YACZ;QACF;QAEA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAA,YAAa,CAAC,IAAI,CAAC,GAAG,EAAE;IAC7C;IAEA,kEAAkE;IAClE,yBAAyB,MAAc,EAAE,YAA4B,KAAK,EAAE;QAC1E,MAAM,KAAK,IAAI,yLAAW;QAC1B,MAAM,YAAY,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,qBAAqB,WAAW;QACzG,UAAU;QACV,OAAO;IACT;IAEA,0DAA0D;IAC1D,gCAAgC,WAAmB,EAAE,gBAAwB,KAAK,GAAG,GAAG,QAAQ,EAAE,EAAE;QAClG,MAAM,KAAK,IAAI,yLAAW;QAE1B,MAAM,YAAY,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC;YACtD,SAAS;YACT,mBAAmB;YACnB;YACA,UAAU;YACV,OAAO;YACP,aAAa;QACf;QACA,UAAU;QAEV,OAAO;IACT;IAEA,6DAA6D;IAC7D,iCAAiC,YAAoB,EAAE,gBAAwB,KAAK,GAAG,GAAG,QAAQ,EAAE,EAAE;QACpG,MAAM,KAAK,IAAI,yLAAW;QAE1B,MAAM,YAAY,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC;YACtD,SAAS;YACT,mBAAmB;YACnB;YACA,UAAU;YACV,OAAO;YACP,aAAa;QACf;QACA,UAAU;QAEV,OAAO;IACT;IAEA,2EAA2E;IAC3E,+BAA+B,YAAoB,EAAE,YAAoB,EAAE,gBAAwB,KAAK,GAAG,GAAG,QAAQ,EAAE,EAAE;QACxH,MAAM,KAAK,IAAI,yLAAW;QAE1B,MAAM,YAAY,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,eAAe,CAAC;YACrD,SAAS;YACT,mBAAmB;YACnB;YACA,UAAU;YACV,OAAO;YACP,OAAO;YACP,aAAa;YACb,oBAAoB;YACpB,aAAa;QACf;QACA,UAAU;QAEV,OAAO;IACT;IAEA,4EAA4E;IAC5E,gCAAgC,YAAoB,EAAE,YAAoB,EAAE,gBAAwB,KAAK,GAAG,GAAG,QAAQ,EAAE,EAAE;QACzH,MAAM,KAAK,IAAI,yLAAW;QAE1B,MAAM,YAAY,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,eAAe,CAAC;YACrD,SAAS;YACT,mBAAmB;YACnB;YACA,UAAU;YACV,OAAO;YACP,OAAO;YACP,aAAa;YACb,oBAAoB;YACpB,aAAa;QACf;QACA,UAAU;QAEV,OAAO;IACT;IAEA,oCAAoC;IACpC,MAAM,oBAAoB,QAAgB,EAAE;QAC1C,IAAI;YACF,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,qBAAqB;QAC7E,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,CAAC,gCAAgC,EAAE,SAAS,SAAS,CAAC,EAAE;YACtE,OAAO;QACT;IACF;AACF;AAEO,SAAS,kBAAkB,aAAsB,EAAE,UAA0C;;IAClG,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAwB;IAC5D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,yKAAQ,EAAgB;IAElF,MAAM,EAAE,QAAQ,cAAc,EAAE,GAAG,IAAA,4LAA4B;IAC/D,MAAM,iBAAiB,IAAA,iLAAiB;IACxC,MAAM,EAAE,SAAS,cAAc,EAAE,GAAG,IAAA,4MAAU;IAE9C,yCAAyC;IACzC,MAAM,mBAAmB,IAAA,4KAAW;2DAAC;YACnC,IAAI,iBAAiB,YAAY;gBAC/B,MAAM,YAAY,IAAI,eAAe,eAAe,WAAW;gBAC/D,UAAU;YACZ;QACF;0DAAG;QAAC;QAAe;KAAW;IAE9B,8CAA8C;IAC9C,IAAA,0KAAS;uCAAC;YACR;QACF;sCAAG;QAAC;KAAiB;IAErB,MAAM,uBAAuB,IAAA,4KAAW;+DAAC;YACvC,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;YAE7B,OAAO,IAAI;uEAAQ,OAAO,SAAS;oBACjC,IAAI;wBACF,qCAAqC;wBACrC,IAAI;wBACJ,IAAI;4BACF,KAAK,OAAO,kCAAkC;4BAC9C,QAAQ,GAAG,CAAC;wBACd,EAAE,OAAO,UAAU;4BACjB,QAAQ,GAAG,CAAC,4DAA4D,SAAS,OAAO;4BACxF,KAAK,OAAO,+BAA+B;wBAC7C;wBAEA,QAAQ,GAAG,CAAC,wCAAwC;wBACpD,QAAQ,GAAG,CAAC,sDAAsD,OAAO,mBAAmB,CAAC;wBAE7F,IAAI,eAAe,YAAY;4BAC7B,gEAAgE;4BAChE,2DAA2D;4BAC3D,eACE;gCACE,aAAa;4BACf,GACA;gCACE,SAAS;2FAAE,OAAO;wCAChB,QAAQ,GAAG,CAAC,0DAA0D,OAAO,MAAM;wCAEnF,IAAI;4CACF,oFAAoF;4CACpF,QAAQ,GAAG,CAAC;4CAEZ,MAAM,YAAY,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC;gDAC5D,QAAQ,OAAO,MAAM;gDACrB,SAAS;gDACT,SAAS;oDACP,SAAS;oDACT,aAAa;oDACb,aAAa;gDACf;4CACF;4CAEA,QAAQ,GAAG,CAAC,4CAA4C;4CAExD,wDAAwD;4CACxD,MAAM,UAAU,OAAO,gCAAgC,CAAC;4CAExD,IAAI,SAAS;gDACX,QAAQ,GAAG,CAAC,uDAAuD;gDACnE,yBAAyB;gDACzB,OAAO,8BAA8B,CAAC;gDACtC,iBAAiB;gDACjB,QAAQ;4CACV,OAAO;gDACL,QAAQ,KAAK,CAAC;gDACd,OAAO,IAAI,MAAM;4CACnB;wCACF,EAAE,OAAO,YAAY;4CACnB,QAAQ,KAAK,CAAC,2DAA2D;4CACzE,OAAO;wCACT;oCACF;;gCACA,OAAO;2FAAE,OAAO;wCACd,QAAQ,KAAK,CAAC,6CAA6C;wCAE3D,+CAA+C;wCAC/C,IAAI;4CACF,QAAQ,GAAG,CAAC;4CAEZ,IAAI,CAAC,gBAAgB,SAAS;gDAC5B,OAAO,IAAI,MAAM;gDACjB;4CACF;4CAEA,sDAAsD;4CACtD,MAAM,SAAS,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC;gDAChE,aAAa;gDACb,4DAA4D;gDAC5D,6CAA6C;gDAC7C,SAAS;oDAAE,SAAS;oDAAM,aAAa;gDAAK;4CAC9C;4CAEA,IAAI,OAAO,KAAK,KAAK,qBAAqB;gDACxC,MAAM,IAAI,MAAM;4CAClB;4CAEA,MAAM,UAAU,OAAO,4BAA4B,CAAC,OAAO,WAAW;4CAEtE,IAAI,SAAS;gDACX,yBAAyB;gDACzB,OAAO,8BAA8B,CAAC;gDACtC,iBAAiB;gDACjB,QAAQ;4CACV,OAAO;gDACL,OAAO,IAAI,MAAM;4CACnB;wCACF,EAAE,OAAO,WAAW;4CAClB,QAAQ,KAAK,CAAC,gDAAgD;4CAC9D,OAAO;wCACT;oCACF;;4BACF;wBAEJ,OAAO;4BACL,kCAAkC;4BAClC,OAAO,IAAI,MAAM;wBACnB;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,mDAAmD;wBACjE,OAAO;oBACT;gBACF;;QACF;8DAAG;QAAC;QAAQ;QAAY;QAAgB;KAAe;IAEvD,MAAM,cAAc,IAAA,4KAAW;sDAAC,OAAO;YACrC,IAAI,CAAC,UAAU,CAAC,eAAe,MAAM,IAAI,MAAM;YAE/C,OAAO,IAAI;8DAAQ,CAAC,SAAS;oBAC3B,IAAI;wBACF,MAAM,KAAK,OAAO,wBAAwB,CAAC;wBAE3C,IAAI,eAAe,YAAY;4BAC7B,eACE;gCACE,aAAa;gCACb,SAAS;oCACP,aAAa;oCACb,mBAAmB;gCACrB;4BACF,GACA;gCACE,SAAS;kFAAE,CAAC;wCACV,QAAQ,GAAG,CAAC,uCAAuC;wCACnD,QAAQ;oCACV;;gCACA,OAAO;kFAAE,CAAC;wCACR,QAAQ,KAAK,CAAC,+CAA+C;wCAC7D,OAAO;oCACT;;4BACF;wBAEJ,OAAO;4BACL,kCAAkC;4BAClC,OAAO,IAAI,MAAM;wBACnB;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,2DAA2D;wBACzE,OAAO;oBACT;gBACF;;QACF;qDAAG;QAAC;QAAQ;QAAe;QAAY;KAAe;IAEtD,MAAM,uBAAuB,IAAA,4KAAW;+DAAC,OAAO;YAC9C,IAAI,CAAC,UAAU,CAAC,eAAe,MAAM,IAAI,MAAM;YAE/C,OAAO,IAAI;uEAAQ,CAAC,SAAS;oBAC3B,MAAM,gBAAgB,KAAK,GAAG,GAAG,QAAQ,IAAI,kBAAkB;oBAC/D,MAAM,KAAK,OAAO,yBAAyB,CAAC,cAAc;oBAE1D,IAAI,eAAe,YAAY;wBAC7B,eACE;4BAAE,aAAa;wBAAG,GAClB;4BACE,SAAS;uFAAE,CAAC;oCACV,QAAQ,GAAG,CAAC,2CAA2C;oCACvD,QAAQ;gCACV;;4BACA,OAAO;uFAAE,CAAC;oCACR,QAAQ,KAAK,CAAC,oDAAoD;oCAClE,OAAO;gCACT;;wBACF;oBAEJ,OAAO;wBACL,kCAAkC;wBAClC,OAAO,IAAI,MAAM;oBACnB;gBACF;;QACF;8DAAG;QAAC;QAAQ;QAAe;QAAY;KAAe;IAEtD,MAAM,uBAAuB,IAAA,4KAAW;+DAAC,OAAO;YAC9C,IAAI,CAAC,UAAU,CAAC,eAAe,MAAM,IAAI,MAAM;YAE/C,OAAO,IAAI;uEAAQ,CAAC,SAAS;oBAC3B,MAAM,gBAAgB,KAAK,GAAG,GAAG,QAAQ,IAAI,kBAAkB;oBAC/D,MAAM,KAAK,OAAO,0BAA0B,CAAC,aAAa;oBAE1D,IAAI,eAAe,YAAY;wBAC7B,eACE;4BAAE,aAAa;wBAAG,GAClB;4BACE,SAAS;uFAAE,CAAC;oCACV,QAAQ,GAAG,CAAC,4CAA4C;oCACxD,QAAQ;gCACV;;4BACA,OAAO;uFAAE,CAAC;oCACR,QAAQ,KAAK,CAAC,qDAAqD;oCACnE,OAAO;gCACT;;wBACF;oBAEJ,OAAO;wBACL,kCAAkC;wBAClC,OAAO,IAAI,MAAM;oBACnB;gBACF;;QACF;8DAAG;QAAC;QAAQ;QAAe;QAAY;KAAe;IAEtD,MAAM,sBAAsB,IAAA,4KAAW;8DAAC,OAAO;YAC7C,IAAI,CAAC,UAAU,CAAC,eAAe,OAAO;YACtC,OAAO,OAAO,mBAAmB,CAAC;QACpC;6DAAG;QAAC;QAAQ;KAAc;IAE1B,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GAtPgB;;QAKqB,4LAA4B;QACxC,iLAAiB;QACJ,4MAAU"}},
    {"offset": {"line": 508, "column": 0}, "map": {"version":3,"sources":["file:///Users/kiran/Desktop/suitent/frontend/hooks/useTraderBalances.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\n\nexport function useTraderBalances(trader: any, isInitialized: boolean = false) {\n  const [balances, setBalances] = useState<{ [key: string]: string }>({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchBalances = useCallback(async () => {\n    if (!trader || !isInitialized) {\n      setLoading(false);\n      setBalances({});\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const [suiBalance, usdtBalance, deepBalance] = await Promise.allSettled([\n        trader.checkManagerBalance('SUI'),\n        trader.checkManagerBalance('DBUSDT'),\n        trader.checkManagerBalance('DEEP')\n      ]);\n\n      const newBalances: { [key: string]: string } = {};\n\n      if (suiBalance.status === 'fulfilled' && suiBalance.value) {\n        // checkManagerBalance returns {coinType, balance} object, extract balance\n        const balanceObj = suiBalance.value;\n        newBalances['SUI'] = typeof balanceObj === 'object' ? balanceObj.balance || '0' : balanceObj || '0';\n      } else {\n        newBalances['SUI'] = '0';\n      }\n      \n      if (usdtBalance.status === 'fulfilled' && usdtBalance.value) {\n        const balanceObj = usdtBalance.value;\n        newBalances['USDT'] = typeof balanceObj === 'object' ? balanceObj.balance || '0' : balanceObj || '0';\n      } else {\n        newBalances['USDT'] = '0';\n      }\n      \n      if (deepBalance.status === 'fulfilled' && deepBalance.value) {\n        const balanceObj = deepBalance.value;\n        newBalances['DEEP'] = typeof balanceObj === 'object' ? balanceObj.balance || '0' : balanceObj || '0';\n      } else {\n        newBalances['DEEP'] = '0';\n      }\n\n      console.log('[useTraderBalances] Processed balances:', newBalances);\n      setBalances(newBalances);\n    } catch (err: any) {\n      console.error('[useTraderBalances] Error fetching balances:', err);\n      setError(err.message || 'Failed to fetch balances');\n    } finally {\n      setLoading(false);\n    }\n  }, [trader, isInitialized]);\n\n  useEffect(() => {\n    fetchBalances();\n  }, [fetchBalances, isInitialized]);\n\n  const refetch = useCallback(() => {\n    return fetchBalances();\n  }, [fetchBalances]);\n\n  return {\n    balances,\n    loading,\n    error,\n    refetch\n  };\n}"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIO,SAAS,kBAAkB,MAAW,EAAE,gBAAyB,KAAK;;IAC3E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAA4B,CAAC;IACrE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,MAAM,gBAAgB,IAAA,4KAAW;wDAAC;YAChC,IAAI,CAAC,UAAU,CAAC,eAAe;gBAC7B,WAAW;gBACX,YAAY,CAAC;gBACb;YACF;YAEA,WAAW;YACX,SAAS;YAET,IAAI;gBACF,MAAM,CAAC,YAAY,aAAa,YAAY,GAAG,MAAM,QAAQ,UAAU,CAAC;oBACtE,OAAO,mBAAmB,CAAC;oBAC3B,OAAO,mBAAmB,CAAC;oBAC3B,OAAO,mBAAmB,CAAC;iBAC5B;gBAED,MAAM,cAAyC,CAAC;gBAEhD,IAAI,WAAW,MAAM,KAAK,eAAe,WAAW,KAAK,EAAE;oBACzD,0EAA0E;oBAC1E,MAAM,aAAa,WAAW,KAAK;oBACnC,WAAW,CAAC,MAAM,GAAG,OAAO,eAAe,WAAW,WAAW,OAAO,IAAI,MAAM,cAAc;gBAClG,OAAO;oBACL,WAAW,CAAC,MAAM,GAAG;gBACvB;gBAEA,IAAI,YAAY,MAAM,KAAK,eAAe,YAAY,KAAK,EAAE;oBAC3D,MAAM,aAAa,YAAY,KAAK;oBACpC,WAAW,CAAC,OAAO,GAAG,OAAO,eAAe,WAAW,WAAW,OAAO,IAAI,MAAM,cAAc;gBACnG,OAAO;oBACL,WAAW,CAAC,OAAO,GAAG;gBACxB;gBAEA,IAAI,YAAY,MAAM,KAAK,eAAe,YAAY,KAAK,EAAE;oBAC3D,MAAM,aAAa,YAAY,KAAK;oBACpC,WAAW,CAAC,OAAO,GAAG,OAAO,eAAe,WAAW,WAAW,OAAO,IAAI,MAAM,cAAc;gBACnG,OAAO;oBACL,WAAW,CAAC,OAAO,GAAG;gBACxB;gBAEA,QAAQ,GAAG,CAAC,2CAA2C;gBACvD,YAAY;YACd,EAAE,OAAO,KAAU;gBACjB,QAAQ,KAAK,CAAC,gDAAgD;gBAC9D,SAAS,IAAI,OAAO,IAAI;YAC1B,SAAU;gBACR,WAAW;YACb;QACF;uDAAG;QAAC;QAAQ;KAAc;IAE1B,IAAA,0KAAS;uCAAC;YACR;QACF;sCAAG;QAAC;QAAe;KAAc;IAEjC,MAAM,UAAU,IAAA,4KAAW;kDAAC;YAC1B,OAAO;QACT;iDAAG;QAAC;KAAc;IAElB,OAAO;QACL;QACA;QACA;QACA;IACF;AACF;GAtEgB"}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":["file:///Users/kiran/Desktop/suitent/frontend/app/trade/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useCurrentAccount } from '@mysten/dapp-kit';\nimport { useTurnkey } from '@turnkey/react-wallet-kit';\nimport { useDeepBookTrader } from '../../hooks/useDeepBookTrader';\nimport { useTraderBalances } from '../../hooks/useTraderBalances';\n\nexport default function TradePage() {\n  const [quantityUsdt, setQuantityUsdt] = useState('');\n  const [depositAmount, setDepositAmount] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  const currentAccount = useCurrentAccount();\n  const { wallets: turnkeyWallets } = useTurnkey();\n  const turnkeyWallet = turnkeyWallets?.[0];\n  const turnkeyAddress = turnkeyWallet?.addresses?.[0];\n\n  const walletAddress = currentAccount?.address || turnkeyAddress;\n  const walletType = currentAccount ? 'standard' : (turnkeyAddress ? 'turnkey' : null);\n\n  const {\n    trader,\n    isInitialized,\n    createBalanceManager,\n    depositUsdt,\n    buySuiWithUsdtMarket,\n    sellSuiForUsdtMarket,\n    checkManagerBalance\n  } = useDeepBookTrader(walletAddress, walletType);\n\n  const { balances, loading: balancesLoading, refetch } = useTraderBalances(trader, isInitialized);\n\n  useEffect(() => {\n    setError(null);\n    setSuccess(null);\n  }, [quantityUsdt, depositAmount]);\n\n  const handleCreateBalanceManager = async () => {\n    if (!trader) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      await createBalanceManager();\n      setSuccess('Balance Manager created successfully!');\n      await refetch();\n    } catch (err: any) {\n      setError(err.message || 'Failed to create Balance Manager');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDeposit = async () => {\n    if (!trader || !depositAmount) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const amount = parseFloat(depositAmount);\n      await depositUsdt(amount);\n      setSuccess(`Deposited ${amount} USDT successfully!`);\n      setDepositAmount('');\n      await refetch();\n    } catch (err: any) {\n      setError(err.message || 'Failed to deposit USDT');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleBuyOrder = async () => {\n    if (!trader || !quantityUsdt) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const quantity = parseFloat(quantityUsdt);\n      const result = await buySuiWithUsdtMarket(quantity);\n      setSuccess(`Buy order executed! Transaction: ${result.digest}`);\n      setQuantityUsdt('');\n      await refetch();\n    } catch (err: any) {\n      setError(err.message || 'Failed to execute buy order');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSellOrder = async () => {\n    if (!trader || !quantityUsdt) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const quantity = parseFloat(quantityUsdt);\n      const result = await sellSuiForUsdtMarket(quantity);\n      setSuccess(`Sell order executed! Transaction: ${result.digest}`);\n      setQuantityUsdt('');\n      await refetch();\n    } catch (err: any) {\n      setError(err.message || 'Failed to execute sell order');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!walletAddress) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slush-bg via-slush-bg to-slush-card flex items-center justify-center\">\n        <div className=\"bg-slush-card border border-slush-border rounded-3xl p-8 max-w-md w-full mx-4\">\n          <div className=\"text-center\">\n            <h1 className=\"text-2xl font-bold text-white mb-4\">DeepBook Trading</h1>\n            <p className=\"text-slush-text mb-6\">Connect your wallet to start trading</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slush-bg via-slush-bg to-slush-card py-8\">\n      <div className=\"container mx-auto px-4 max-w-4xl\">\n        <h1 className=\"text-3xl font-bold text-white mb-8 text-center\">DeepBook Trading</h1>\n        \n        {/* Wallet Info */}\n        <div className=\"bg-slush-card border border-slush-border rounded-3xl p-6 mb-6\">\n          <h2 className=\"text-xl font-semibold text-white mb-4\">Wallet Information</h2>\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-slush-text\">Wallet Type:</span>\n              <span className=\"text-white capitalize\">{walletType || 'Not connected'}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-slush-text\">Address:</span>\n              <span className=\"text-white font-mono text-sm\">\n                {walletAddress?.slice(0, 8)}...{walletAddress?.slice(-8)}\n              </span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-slush-text\">Balance Manager:</span>\n              <span className={`${isInitialized ? 'text-green-400' : 'text-yellow-400'}`}>\n                {isInitialized ? 'Ready' : 'Not Created'}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* Balance Manager Setup */}\n        {!isInitialized && (\n          <div className=\"bg-slush-card border border-slush-border rounded-3xl p-6 mb-6\">\n            <h2 className=\"text-xl font-semibold text-white mb-4\">Setup Balance Manager</h2>\n            <p className=\"text-slush-text mb-4\">\n              Before trading, you need to create a Balance Manager. This is a one-time setup.\n            </p>\n            <button\n              onClick={handleCreateBalanceManager}\n              disabled={isLoading}\n              className=\"w-full bg-sui-blue hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-2xl transition-colors\"\n            >\n              {isLoading ? 'Creating...' : 'Create Balance Manager'}\n            </button>\n          </div>\n        )}\n\n        {/* Manager Balances */}\n        {isInitialized && (\n          <div className=\"bg-slush-card border border-slush-border rounded-3xl p-6 mb-6\">\n            <h2 className=\"text-xl font-semibold text-white mb-4\">Manager Balances</h2>\n            {balancesLoading ? (\n              <div className=\"text-center py-4\">\n                <div className=\"animate-pulse text-slush-text\">Loading balances...</div>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {Object.entries(balances || {}).map(([token, balance]) => (\n                  <div key={token} className=\"flex justify-between items-center bg-slush-bg rounded-xl p-3\">\n                    <span className=\"text-white font-semibold\">{token}</span>\n                    <span className=\"text-slush-text\">{balance}</span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Deposit Section */}\n        {isInitialized && (\n          <div className=\"bg-slush-card border border-slush-border rounded-3xl p-6 mb-6\">\n            <h2 className=\"text-xl font-semibold text-white mb-4\">Deposit USDT</h2>\n            <p className=\"text-slush-text mb-4\">Deposit USDT into your Balance Manager to start trading</p>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-slush-text text-sm mb-2\">Amount (USDT)</label>\n                <input\n                  type=\"number\"\n                  value={depositAmount}\n                  onChange={(e) => setDepositAmount(e.target.value)}\n                  placeholder=\"Enter amount to deposit\"\n                  className=\"w-full bg-slush-bg border border-slush-border rounded-xl px-4 py-3 text-white placeholder-slush-text focus:outline-none focus:border-sui-blue\"\n                />\n              </div>\n              <button\n                onClick={handleDeposit}\n                disabled={isLoading || !depositAmount}\n                className=\"w-full bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-2xl transition-colors\"\n              >\n                {isLoading ? 'Depositing...' : 'Deposit USDT'}\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Trading Section */}\n        {isInitialized && (\n          <div className=\"bg-slush-card border border-slush-border rounded-3xl p-6 mb-6\">\n            <h2 className=\"text-xl font-semibold text-white mb-4\">Market Orders</h2>\n            <p className=\"text-slush-text mb-4\">Place market orders to buy or sell SUI using USDT</p>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-slush-text text-sm mb-2\">Quantity (USDT for buy, SUI for sell)</label>\n                <input\n                  type=\"number\"\n                  value={quantityUsdt}\n                  onChange={(e) => setQuantityUsdt(e.target.value)}\n                  placeholder=\"Enter quantity\"\n                  className=\"w-full bg-slush-bg border border-slush-border rounded-xl px-4 py-3 text-white placeholder-slush-text focus:outline-none focus:border-sui-blue\"\n                />\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <button\n                  onClick={handleBuyOrder}\n                  disabled={isLoading || !quantityUsdt}\n                  className=\"bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-2xl transition-colors\"\n                >\n                  {isLoading ? 'Processing...' : 'Buy SUI'}\n                </button>\n                \n                <button\n                  onClick={handleSellOrder}\n                  disabled={isLoading || !quantityUsdt}\n                  className=\"bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-2xl transition-colors\"\n                >\n                  {isLoading ? 'Processing...' : 'Sell SUI'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Status Messages */}\n        {error && (\n          <div className=\"bg-red-500/10 border border-red-500/20 rounded-2xl p-4 mb-6\">\n            <p className=\"text-red-400\">{error}</p>\n          </div>\n        )}\n        \n        {success && (\n          <div className=\"bg-green-500/10 border border-green-500/20 rounded-2xl p-4 mb-6\">\n            <p className=\"text-green-400\">{success}</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}